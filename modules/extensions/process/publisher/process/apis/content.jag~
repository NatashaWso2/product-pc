<%
require('/modules/publisher.js').exec(function(ctx) {

        var log=new Log();

    var req=ctx.request;
    var res=ctx.response;
    var store = require('store');
    var user = store.user;
    var userReg = user.userRegistry(session);
    var type= req.getParameter('type');
   

    if(type=="POST")
    {

    var path = '/{context}/apis/assets/';
    var processContent=req.getParameter('content');

    var resource ={
                content: processContent,
                mediaType: 'text/plain',
                description: 'This is a sample description',
                uuid: '0123',
                properties:{prop1: 'val1', prop2: 'val2'}
            };

    //Saving the content to the resource
    userReg.put(path,resource);


    //Check if the content was placed in the registry
    var result = userReg.get(path);
    var output= ""+result.content;
    print(output);

    
    log.info('CONTENT++++'+ processContent);

    }
    if(type=="GET")
    {
    var path = '/_system/governance/'+processName;
    	var result=userReg.get(path);
         var output= ""+result.content;
         
            print(output);
    	log.info('RESULT++++++'+ result.content);
       


    }
